<UserControl x:Class="WpfCronExpressionUI.WpfCronExpressionUIView"
             x:Name="WpfCronExpressionUIViewInstance"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:WpfCronExpressionUI"
             xmlns:viewModel="clr-namespace:WpfCronExpressionUI.ViewModel"
             mc:Ignorable="d"
             d:DesignHeight="350" d:DesignWidth="500">
    <UserControl.DataContext>
        <viewModel:ViewModel />
    </UserControl.DataContext>
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <TabControl Grid.Row="0" Style="{Binding TabControlStyle, ElementName=WpfCronExpressionUIViewInstance}">
            <TabControl.Resources>
                <Style TargetType="RadioButton">
                    <Setter Property="VerticalAlignment" Value="Center" />
                </Style>
                <Style TargetType="TextBlock">
                    <Setter Property="VerticalAlignment" Value="Center" />
                </Style>
                <Style TargetType="TextBox">
                    <Setter Property="VerticalAlignment" Value="Center" />
                </Style>
                <Style TargetType="StackPanel">
                    <Setter Property="VerticalAlignment" Value="Center" />
                </Style>
            </TabControl.Resources>
            <TabItem Header="Year" Style="{Binding TabItemStyle, ElementName=WpfCronExpressionUIViewInstance}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition SharedSizeGroup="YearRows" Height="Auto" />
                        <RowDefinition SharedSizeGroup="YearRows" Height="Auto" />
                        <RowDefinition SharedSizeGroup="YearRows" Height="Auto" />
                        <RowDefinition Height="Auto" MaxHeight="120" />
                        <RowDefinition SharedSizeGroup="YearRows" Height="Auto" />
                    </Grid.RowDefinitions>
                    
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="5">
                        <RadioButton IsChecked="{Binding AnyYear, Mode=TwoWay}" GroupName="YearGroup" />
                        <TextBlock Text="Any Year" Margin="5,0" />
                    </StackPanel>
                    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="5">
                        <RadioButton IsChecked="{Binding EveryXYears, Mode=TwoWay}" GroupName="YearGroup" />
                        <TextBlock Text="Every" Margin="5,0" />
                        <ComboBox SelectedItem="{Binding EveryXYearsSelectedItem, Mode=TwoWay}" ItemsSource="{Binding EveryXYearsItems}" />
                        <TextBlock Text="Year(s) starting in" Margin="5,0" />
                        <ComboBox SelectedItem="{Binding EveryXYearsStartInSelectedItem, Mode=TwoWay}" ItemsSource="{Binding YearRangeItems}" />
                    </StackPanel>
                    <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="5">
                        <RadioButton IsChecked="{Binding SpecificYears, Mode=TwoWay}" GroupName="YearGroup" />
                        <TextBlock Text="Specific Years" Margin="5,0" />
                    </StackPanel>
                    <ScrollViewer Grid.Row="3" Margin="30,0">
                        <ItemsControl ItemsSource="{Binding YearRangeCheckedItems}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <CheckBox Content="{Binding Description}" IsChecked="{Binding IsChecked}" Margin="4" />
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                    <StackPanel Grid.Row="4" Orientation="Horizontal" Margin="5">
                        <RadioButton IsChecked="{Binding YearRange, Mode=TwoWay}" GroupName="YearGroup" />
                        <TextBlock Text="Every year between" Margin="5,0" />
                        <ComboBox SelectedItem="{Binding YearRangeStartSelectedItem, Mode=TwoWay}" ItemsSource="{Binding YearRangeItems}" />
                        <TextBlock Text="and" Margin="5,0" />
                        <ComboBox SelectedItem="{Binding YearRangeEndSelectedItem, Mode=TwoWay}" ItemsSource="{Binding YearRangeItems}" />
                    </StackPanel>
                </Grid>
            </TabItem>
        </TabControl>

        <TextBlock Grid.Row="1" Text="{Binding CronExpression}" Margin="0,5" 
                   HorizontalAlignment="Center"
                   Visibility="{Binding ElementName=WpfCronExpressionUIViewInstance, Path=ShowCronExpression, Converter={StaticResource BooleanToVisibilityConverter}}" />
    </Grid>
</UserControl>